<!-- <h1>Game#index</h1>
<p>Find me in app/views/game/index.html.erb</p> -->

<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TweenMax.min.js"></script> -->

<script>
  
  var crystalId = <%= current_user.crystal.id %>;
  var recordId = <%= current_user.record.id %>;
</script>
<script src="/javascripts/lib/TweenMax.min.js"></script>
<script type="text/javascript" src="/javascripts/lib/_three.min.js"></script>
<script type="text/javascript" src="/javascripts/lib/pilot.js"></script>
<script type="text/javascript" src="/javascripts/lib/airplane.js"></script>
<script type="text/javascript" src="/javascripts/lib/sharpPlane.js"></script>
<script type="text/javascript" src="/javascripts/lib/whiteSharpPlane.js"></script>
<script type="text/javascript" src="/javascripts/lib/brownSharpPlane.js"></script>
<script type="text/javascript" src="/javascripts/lib/doubleWingPlane.js"></script>
<script type="text/javascript" src="/javascripts/lib/cloud.js"></script>
<script type="text/javascript" src="/javascripts/lib/gameObjectsRow.js"></script>
<script type="text/javascript" src="/javascripts/lib/sideClouds.js"></script>
<script type="text/javascript" src="/javascripts/lib/ground.js"></script>
<script type="text/javascript" src="/javascripts/lib/crystalParticle.js"></script>
<script type="text/javascript" src="/javascripts/lib/crystal.js"></script>
<script type="text/javascript" src="/javascripts/lib/gameN.js.erb"></script>

<style type="text/css">
button {
    background-color: #4CAF50; 
    color: white; 
    width: 180px;
    height: 80px;
    border: 2px solid white;
    padding: 16px 32px;
    text-align: center;
    text-decoration: none;
    font-size: 16px;
    top: 50%;
    margin-top: -40px;
    left: 50%;
    margin-left: -90px;
    position: absolute;
    opacity: 0;
}
</style>
<!-- <script src="/javascripts/lib/gameN.js.erb"></script> -->

<!-- <script type="text/javascript">
  alert('from plane');
</script>
 -->

 <!--current_user.crystal.quantity += 1; current_user.crystal.save; puts current_user.crystal.quantity -->

<div id="world"></div>

<div id="qrCode">
        <figure>
            <!--<img src="img/qr-code.gif" alt="qr code" width="200" height="200">-->
<!-- 
            <figcaption>
                <h1>OOOPS...</h1>
                <p>I'm sorry but this game is only for mobile devices</p>
                <p>Try using your smartphone</p>

            </figcaption> -->
        </figure>
    </div>
    <div id="rotate">
      <figure>
            <img src="/rotate.png" alt="Rotate your device to the left" height="200" class="img-fluid" style="margin: 0; margin-top: 80px">
            <figcaption>
                <p>PAUSE</p>
                <p style="margin-top: -20px">Rotate your phone to the left</p>
                <p style="margin-top: -20px">To control the character use <strong>ACCELEROMETER</strong></p>
                <p style="margin-top: -20px">Avoid collisions with clouds</p>
                <p style="margin-top: -20px">Catch crystals</p>
                <%= button_to "Home", root_path, class: 'btn btn-outline-success ', method: 'get', id: 'home'%>
            </figcaption>
      </figure>
    </div>
    <script type="text/javascript">
        home = document.getElementById('home');
        home.onclick = function(){
            $.ajax({
                                    type: "PATCH",
                                    dataType: "script",
                                    url: '/crystals/'+crystalId,
                                    contentType: 'application/json',
                                    data: JSON.stringify({ resource:{crystals: totalCrystals, id: crystalId}, _method:'patch' })
                                });

                                $.ajax({
                                    type: "PATCH",
                                    dataType: "script",
                                    url: '/records/'+recordId,
                                    contentType: 'application/json',
                                    data: JSON.stringify({ resource:{crystals: totalCrystals, id: recordId, time: score}, _method:'patch' })
                                });
        }
    </script>





